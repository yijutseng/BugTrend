myapp=oauth_app("twitter",key="XdbHQ4sp9jm7bC83L0agM04Ux",
secret="hhIuxufD6wakFfIKhupe6pDW0lgHBtKY30BuFfioqYD4usjAyV")
library(httr)
myapp=oauth_app("twitter",key="XdbHQ4sp9jm7bC83L0agM04Ux",
secret="hhIuxufD6wakFfIKhupe6pDW0lgHBtKY30BuFfioqYD4usjAyV")
sig=sign_oauth1.0(myapp,token="216362944-mjbpCWCskNOAVrDp5SgDs8TRPTDs9NwPWEA1nKWM",
token_secret="IWPiDSD0GAJVODLKeWovdlaLGGsqSxVPgZLTDxTVCFkih")
homeTL=GET("https://api.twitter.com/1.1/statuses/home_timeline.json",sig)
homeTL
content(homeTL)
json2=jsonlite::formJson(toJson(json1))
json2=jsonlite::fromJson(toJson(json1))
json2=jsonlite::fromJSON(toJson(json1))
json2=jsonlite::fromJSON(toJSON(json1))
library(jsonlite)
json1=content(homeTL)
json2=jsonlite::fromJSON(toJSON(json1))
json2
AuthTwitter<-function (key="XdbHQ4sp9jm7bC83L0agM04Ux",secret="hhIuxufD6wakFfIKhupe6pDW0lgHBtKY30BuFfioqYD4usjAyV",
token="216362944-mjbpCWCskNOAVrDp5SgDs8TRPTDs9NwPWEA1nKWM",token_secret="IWPiDSD0GAJVODLKeWovdlaLGGsqSxVPgZLTDxTVCFkih"){
myapp=oauth_app("twitter",key=key,secret=secret)
sig=sign_oauth1.0(myapp,token=token,token_secret=token_secret)
sig
}
sig<-AuthTwitter()
library(httr)
sig<-AuthTwitter()
homeTL=GET("https://api.twitter.com/1.1/statuses/home_timeline.json",sig)
jsonHome=content(homeTL)
json2=jsonlite::fromJSON(toJSON(jsonHome))
library(jsonlite)
json2=jsonlite::fromJSON(toJSON(jsonHome))
friends=GET("https://api.twitter.com/1.1/friends/ids.json?screen_name=showFriends&user_id=yijutseng",sig)
jsonFriend=content(friends)
jsonFriend
friends
friends=GET("https://api.twitter.com/1.1/friends/ids.json?screen_name=a&user_id=yijutseng",sig)
jsonFriend=content(friends)
jsonFriend
followers=GET("https://api.twitter.com/1.1/followers/ids.json?screen_name=a&user_id=yijutseng",sig)
jsonFollower=content(followers)
jsonTarget=content(target)
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV",sig)
jsonTarget=content(target)
jsonTarget[1]
jsonTarget[[1]]
jsonTarget$statuses[[1]]
jsonTarget$statuses[[1]]$text
jsonTarget$statuses$text
jsonTarget$statuses[]$text
jsonTarget$statuses[[1]]$text
jsonTarget$statuses[[2]]$text
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=5000",sig)
jsonTarget=content(target)
jsonTarget$statuses[[2]]$text
jsonTargetPorc=jsonlite::fromJSON(toJSON(jsonTarget))
jsonTargetPorc
jsonTargetPorc[1]
jsonTargetPorc[1][1]
jsonTargetPorc$statuses$text[1:10]
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=1E6",sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text[1:10]
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=1000000",sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text[1:10]
jsonTarget$statuses$text[1:10]
length(jsonTarget$statuses$text)
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&until=2014-01-01",sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
length(jsonTarget$statuses$text)
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&until=2014-12-01",sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
length(jsonTarget$statuses$text)
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&until=2014-01-01",sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
length(jsonTarget$statuses$text)
jsonTarget
jsonTarget$statuses$text
content(target)
jsonTarget=jsonlite::fromJSON(toJSON(jsonTargetCont))
jsonTargetCont=content(target)
jsonTarget=jsonlite::fromJSON(toJSON(jsonTargetCont))
jsonTarget
jsonTarget$statuses
jsonTarget$statuses
jsonTarget$search_metadata
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&until=2015-01-01",sig)
jsonTargetCont=content(target)
jsonTarget=jsonlite::fromJSON(toJSON(jsonTargetCont))
jsonTarget$search_metadata
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=1000000",sig)
jsonTargetCont=content(target)
jsonTarget=jsonlite::fromJSON(toJSON(jsonTargetCont))
jsonTarget$search_metadata
jsonTarget$statuses$text
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=50",sig)
jsonTargetCont=content(target)
jsonTarget=jsonlite::fromJSON(toJSON(jsonTargetCont))
jsonTarget$search_metadata
length(jsonTarget$statuses$text)
target=GET("https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100",sig)
jsonTarget$search_metadata$$max_id-1
jsonTarget$search_metadata$max_id-1
as.character(jsonTarget$search_metadata$max_id-1)
jsonTarget$statuses$id_str
jsonTarget$search_metadata$since_id
jsonTarget$search_metadata
target2=GET(paste0("https://api.twitter.com/1.1/search/tweets.json",jsonTarget$search_metadata$refresh_url),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target2)))
jsonTarget$search_metadata$refresh_url
length(jsonTarget$statuses$text)
jsonTarget$statuses$text
jsonTarget$statuses$id
jsonTarget$statuses$id_str
length(jsonTarget)
jsonTarget$statuses$id_str[length(jsonTarget)]
url="https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100"
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$search_metadata$refresh_url
length(jsonTarget$statuses$text)
target=GET(paste0(url,'&max_id=',jsonTarget$statuses$id_str[length(jsonTarget)]),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$search_metadata$refresh_url
length(jsonTarget$statuses$text)
url="https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100"
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text
target=GET(paste0(url,'&max_id=',jsonTarget$statuses$id_str[length(jsonTarget)]),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text
url="https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100"
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[100]
target=GET(paste0(url,'&max_id=',jsonTarget$statuses$id_str[length(jsonTarget)]),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[1]
url="https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100"
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[length(jsonTarget)]
jsonTarget$statuses$id_str[length(jsonTarget)]
target=GET(paste0(url,'&max_id=',jsonTarget$statuses$id_str[length(jsonTarget)]),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[1]
jsonTarget$statuses$id_str[1]
length(jsonTarget)
length(jsonTarget$statuses)
jsonTarget$search_metadata
url="https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100"
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[jsonTarget$search_metadata$count]
jsonTarget$statuses$id_str[jsonTarget$search_metadata$count]
target=GET(paste0(url,'&max_id=',jsonTarget$statuses$id_str[jsonTarget$search_metadata$count]),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[1]
jsonTarget$statuses$id_str[1]
jsonTarget$statuses$id_str[jsonTarget$search_metadata$count]+1
an.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])+1
as.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])+1
as.character(as.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])+1)
url="https://api.twitter.com/1.1/search/tweets.json?q=MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus&count=100"
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[jsonTarget$search_metadata$count]
jsonTarget$statuses$id_str[jsonTarget$search_metadata$count]
target=GET(paste0(url,'&max_id=',as.character(as.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])-1)),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$created_at[1]
jsonTarget$statuses$id_str[1]
as.character(as.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])-1)
searchG='MERS,MERS-CoV,Middle East respiratory syndrome coronavirus'
url=paste0("https://api.twitter.com/1.1/search/tweets.json?q=",searchG,"&count=100")
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text[jsonTarget$search_metadata$count]
target=GET(paste0(url,'&max_id=',as.character(as.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])-1)),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text[1]
url
url
target
searchG='MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus'
url=paste0("https://api.twitter.com/1.1/search/tweets.json?q=",searchG,"&count=100")
target=GET(url,sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text[jsonTarget$search_metadata$count]
target=GET(paste0(url,'&max_id=',as.character(as.numeric(jsonTarget$statuses$id_str[jsonTarget$search_metadata$count])-1)),sig)
jsonTarget=jsonlite::fromJSON(toJSON(content(target)))
jsonTarget$statuses$text[1]
jsonTarget$statuses$retweeted_status
jsonTarget$statuses$source
target
content(target)
contentTarget<-content(target)
contentTarget
contentTarget$statuses
a<-contentTarget$statuses
contentTarget$search_metadata$count
nextID<-''
for(i in 1:2){
if(i==1){
target=GET(url,sig)
}else{
target=GET(paste0(url,'&max_id=',nextID),sig)
}
contentTarget<-content(target)
if(exists('contentList')){
contentList<-mapply(c, contentList, contentTarget, SIMPLIFY=FALSE)
}else{
contentList<-contentTarget
}
nextID<-as.character(as.numeric(contentTarget$statuses$id_str[contentTarget$search_metadata$count])-1)
}
jsonTarget=jsonlite::fromJSON(toJSON(contentList))
jsonTarget$search_metadata
jsonTarget$statuses
jsonTarget$statuses$text[200]
length(jsonTarget$statuses)
length(jsonTarget$statuses$text)
searchG='MERS%2CMERS-CoV%2CMiddle%20East%20respiratory%20syndrome%20coronavirus'
url=paste0("https://api.twitter.com/1.1/search/tweets.json?q=",searchG,"&count=100")
nextID<-''
for(i in 1:100){
if(i==1){
target=GET(url,sig)
}else{
target=GET(paste0(url,'&max_id=',nextID),sig)
}
contentTarget<-content(target)
if(exists('contentList')){
contentList<-mapply(c, contentList, contentTarget, SIMPLIFY=FALSE)
}else{
contentList<-contentTarget
}
nextID<-as.character(as.numeric(contentTarget$statuses$id_str[contentTarget$search_metadata$count])-1)
}
jsonTarget=jsonlite::fromJSON(toJSON(contentList))
length(jsonTarget$statuses$text)
jsonTarget$statuses$text[length(jsonTarget$statuses$text)]
jsonTarget=jsonlite::fromJSON(contentList)
contentList$statuses[1]
contentList$statuses[[1]]
a<-toJSON(contentList)
a
